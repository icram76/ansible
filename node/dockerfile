# Ubuntu alap� image haszn�lata
FROM ubuntu:latest

# K�rnyezeti v�ltoz�k be�ll�t�sa a non-interakt�v telep�t�shez
ENV DEBIAN_FRONTEND=noninteractive

# Rendszer friss�t�se, SSH szerver, Python �s sz�ks�ges csomagok telep�t�se
RUN apt-get update && \
    apt-get install -y openssh-server python3 python3-pip && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# SSH szerver be�ll�t�sai:
# Gy�k�r (root) felhaszn�l� enged�lyez�se SSH-n kereszt�l (tanul�si c�lokra)
RUN echo 'PermitRootLogin yes' >> /etc/ssh/sshd_config
# A jelsz� n�lk�li bel�p�s enged�lyez�se, ami az SSH kulcsos autentik�ci� alapja
RUN echo 'PasswordAuthentication yes' >> /etc/ssh/sshd_config

# SSH kulcsok hely�nek �s jogosults�gainak be�ll�t�sa
RUN mkdir -p /root/.ssh
RUN chmod 700 /root/.ssh

RUN mkdir -p /run/sshd

EXPOSE 22

# Az SSH szolgátatás indítása a konténer futtatásakor
CMD ["/usr/sbin/sshd", "-D"]
